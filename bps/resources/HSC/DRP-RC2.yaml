# This BPS configuration snippet adds updated requestMemory values for all DRP
# and faro tasks known to frequently exceed the default in regular HSC RC2
# processing.
#
# Use it by adding:
#
#   includeConfigs:
#     - ${DRP_PIPE_DIR}/bps/resources/HSC/DRP-RC2.yaml
# 
# (with no outer indentation) to your BPS config file.
#
pipetask:
  # DRP tasks
  skyCorr:
    requestMemory: 15500
  fgcmBuildFromIsolatedStars:
    requestMemory: 8192
  fgcmFitCycle:
    requestMemory: 24576
  fgcmOutputProducts:
    requestMemory: 8192
  assembleCoadd:
    requestMemory: 24576
  jointcal:
    requestMemory: 21000
  deblend:
    requestMemory: 16384
  makeWarp:
    requestMemory: 8192
  measure:
    requestMemory: 16384
  mergeMeasurements:
    requestMemory: 16384
  forcedPhotCoadd:
    requestMemory: 4096
  writeObjectTable:
    requestMemory: 16384
  consolidateObjectTable:
    requestMemory: 35000
  templateGen:
    requestMemory: 5000
  healSparsePropertyMaps:
    requestMemory: 30000
  getTemplate:
    requestMemory: 5000
  consolidateFullDiaObjectTable:
    requestMemory: 10000
  consolidateForcedSourceOnDiaObjectTable:
    requestMemory: 490000
  transformForcedSourceOnDiaObjectTable:
    requestMemory: 10000
  consolidateAssocDiaSourceTable:
    requestMemory: 5000
  consolidateForcedSourceTable:
    requestMemory: 200000
  makeVisitTable:
    requestMemory: 5400
  makeCcdVisitTable:
    requestMemory: 5400
    
  # faro tasks
  matchCatalogsPatch:
    requestMemory: 8192
  matchCatalogsPatchMultiBand:
    requestMemory: 120000
  matchCatalogsTract:
    requestMemory: 120000
  TE1:
    requestMemory: 46000
  TE2:
    requestMemory: 46000
  wPerp:
    requestMemory: 120000
  matchCatalogsTractMag17to21p5:
    requestMemory: 200000
  matchCatalogsTractStarsSNR5to80:
    requestMemory: 200000
  matchCatalogsTractGxsSNR5to80:
    requestMemory: 200000
  modelPhotRepGal1:
    requestMemory: 5000
  modelPhotRepGal2:
    requestMemory: 5000
  modelPhotRepGal3:
    requestMemory: 5000
  modelPhotRepGal4:
    requestMemory: 5000
