description: DRP specialized for the ImSim-DC2 test-med-1 dataset
instrument: lsst.obs.lsst.LsstCamImSim
imports:
  - location: $DRP_PIPE_DIR/pipelines/_ingredients/LSSTCam-imSim/DRP.yaml
    labeledSubsetModifyMode: EDIT
    exclude:
    # TODO[DM-47010]: exclusion is historical, possibly unintentional
    - diaTractQualityCore
    - wholeSkyCore
subsets:
  # step1 is imported.
  step2:
    subset:
      - consolidatePreSourceTable
      - consolidateVisitSummary
      - isolatedStarAssociation
      - finalizeCharacterization
      - makeCcdVisitTable
      - makeVisitTable
      - updateVisitSummary
      - catalogMatchVisit
      - astrometricRefCatSourceVisit
      - reprocessVisitImage
      - transformSourceTable
      - consolidateSourceTable
      - isolatedStarSourceAssociation
    description: |
      Tasks that can be run together, but only after the 'step1'.

      This is a mix of visit-level, tract-level, and collection-level tasks
      that must be run with a skymap data query constraint only (an instrument
      constraint is fine, but generally unneccessary).  For example, running
      with 'tract' (and 'patch') constraints will select partial visits that
      overlap that region.  A skymap constraint is necessary to prevent
      isolatedStarAssociation from producing results for all skymaps in the
      data repository.

      Visit-level tasks include consolidatePreSourceTable,
      consolidateVisitSummary, finalizeCharacterization, updateVisitSummary.
      Tract-level tasks include: isolatedStarAssociation
      Full collection-level tasks include: makeCcdVisitTable, makeVisitTable
  # step3 is imported.
  # step4 is imported.
  # step5 is imported.
  # step6 is imported.
  # step7 is imported.
