description: The DRP pipeline specialized for Subaru's HyperSuprime-Cam
instrument: lsst.obs.subaru.HyperSuprimeCam
imports:
  - location: $DRP_PIPE_DIR/pipelines/_ingredients/DRP.yaml
    labeledSubsetModifyMode: EDIT
    exclude:
      # TODO[DM-47010]: move down out of ingredients.
      # TODO[DM-47010]: exclusion is historical, possibly unintentional
      - diaTractQualityCore
tasks:
  isr:
    class: lsst.ip.isr.IsrTask
    config:
      doAmpOffset: true
      ampOffset.doApplyAmpOffset: true
  fgcmFitCycle:
    class: lsst.fgcmcal.fgcmFitCycle.FgcmFitCycleTask
    config:
      doMultipleCycles: true
  skyCorr:
    class: lsst.pipe.tasks.skyCorrection.SkyCorrectionTask
  updateVisitSummary:
    class: lsst.drp.tasks.update_visit_summary.UpdateVisitSummaryTask
    config:
      background_provider: "replacement"
  makeWarp:
    class: lsst.pipe.tasks.makeWarp.MakeWarpTask
    config:
      # TODO[DM-47010]: remove this override from obs_subaru; better to have
      # pipeline-structure config overrides here.
      doApplySkyCorr: true
  reprocessVisitImage:
    class: lsst.drp.tasks.reprocess_visit_image.ReprocessVisitImageTask
    config:
      do_use_sky_corr: true
