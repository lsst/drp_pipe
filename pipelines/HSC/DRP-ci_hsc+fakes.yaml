description: The DRP+fakes pipeline specialized for the ci_hsc test dataset.
instrument: lsst.obs.subaru.HyperSuprimeCam
imports:
  location: "$DRP_PIPE_DIR/ingredients/HSC/DRP+fakes.yaml"
tasks:
  singleFrameWithFakes:
    class: lsst.pipe.tasks.processCcdWithFakes.ProcessCcdWithFakesTask
    config:
      insertFakes.doProcessAllDataIds: true
      doApplyExternalTractSkyWcs: true
      doApplyExternalTractPhotoCalib: true
      doApplyExternalGlobalPhotoCalib: false
      connections.photoCalibName: "jointcal"
  updateVisitSummary:
    class: lsst.drp.tasks.update_visit_summary.UpdateVisitSummaryTask
    config:
      photo_calib_provider: "tract"
      connections.photoCalibName: "jointcal"
  makeWarp:
    class: lsst.pipe.tasks.makeWarp.MakeWarpTask
    config:
      connections.photoCalibName: "jointcal"
      useGlobalExternalPhotoCalib: false
      connections.coaddName: "fakes_deep"
      connections.calexpType: "fakes_"
  deblend:
    class: lsst.pipe.tasks.deblendCoaddSourcesPipeline.DeblendCoaddSourcesMultiTask
    config:
      connections.inputCoaddName: "fakes_deep"
      connections.outputCoaddName: "fakes_deep"
      multibandDeblend.useCiLimits: true
      multibandDeblend.processSingles: false
  forcedPhotCcd:
    class: lsst.meas.base.forcedPhotCcd.ForcedPhotCcdTask
    config:
      connections.inputCoaddName: "fakes_deep"
      connections.photoCalibName: "jointcal"
      useGlobalExternalPhotoCalib: false
  writeRecalibratedSourceTable:
    class: lsst.pipe.tasks.postprocess.WriteRecalibratedSourceTableTask
    config:
      useGlobalExternalPhotoCalib: false
      connections.photoCalibName: "jointcal"
  isolatedStarAssociation:
    class: lsst.pipe.tasks.isolatedStarAssociation.IsolatedStarAssociationTask
    config:
      band_order: ['i', 'r']
